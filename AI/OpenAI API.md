# Основы

> OpenAI API может применяться к любым задачам, которые подразумевают понимание или создание текстов, кода или изображений.
> *— Официальная документация*

## Термины

**Модель (Model)** — в области ML так называют любой систему, которая подготовлена для выполнения конкретных целей. Текстовые модели в OpenAI называют "GPT", которые обучены для обработки и генерации естественного (human-like) языка.

**GPT (Generative Pre-trained Transformer)** — это тип моделей ML для работы с текстом, который используется в OpenAI. Хотя "трансформеры" являются популярным подходом в ML, термин "GPT" подразумевает модели именно компании OpenAI.

**Запрос (Prompt)** — это входные данные для модели. Создание промпта обычно подразумевает "программирование" модели, как правило, через инструкции или примеры по выполнению конкретных задач.

**Ассистент (Assistant)** — это мета-сущность OpenAI API, которая оперирует в рамках контекста, который задан промптом. Ассистент может использовать и нетекстовые инструменты OpenAI (например, обрабатывать файл или генерировать изображения).

**Эмбеддинг (Embedding)** — это репрезентация данных на языке ML (аналогично байт-коду для компьютеров). В эмбеддинге важно, чтобы похожие по смыслу данные имели похожую репрезентацию.

**Токены (Tokens)** — единица текста, с которой работает модель. Представляет из себя короткое слово или часть длинного слова. Часто начинается с пробела. Для английского языка 1 токен ≈ 4 символа ≈ 0.75 слова. Для GPT размер в токенах указывает на сумму "промпт+результат"
## Модели

OpenAI API содержит множество моделей, которые делятся по возможностям и стоимости.

|Группа моделей|Описание|
|-|-|-|
| GPT-4 | Модели для текста и кода (улучшенные и с большим контекстом) |
| GPT-3.5 | Модели для текста и кода |
| DALL-E | Генерирует и редактирует изображения|
| Whisper | Преобразует речь в текст |
| Whisper | Преобразует речь в текст |

Каждый запрос в API необходимо сопровождать идентификатором модели.
Полный список моделей и их идентификаторов: https://platform.openai.com/docs/models

Если не уверены, с какой модели начать, используйте `gpt-3.5-turbo` или `gpt-4`
# Подготовка

## Настройка аккаунта

Для аутентификации в API необходимо сгенерировать ключ тут: https://platform.openai.com/account/api-keys

## Установка SDK

Хотя работать с OpenAI API можно обычными веб-запросами, мы будем использовать SDK для [Node.js](Node.js.md). После установки Node.js в директории проекта необходимо выполнить команду:

```shell
npm install openai
```

### Тестовый запрос

После установки можно сделать тестовый запрос:

```js
import OpenAI from "openai";

const openai = new OpenAI({apiKey: "USE_YOUR_KEY_HERE"});

async function main() {
  const completion = await openai.chat.completions.create({
    messages: [{ role: "system", content: "You are a helpful assistant." }],
    model: "gpt-3.5-turbo",
  });

  console.log(completion.choices[0]);
}

main();
```

# Возможности

## Генерация текста


## Работа с текстом (на удаление)

Называется "Completion" и осуществляется с помощью POST-запросов на Chat API:
- Text completion (дополняет или генерирует текст) — [docs](https://platform.openai.com/docs/api-reference/completions/create)
- Chat completion (отвечает на реплики беседы) — [docs](https://platform.openai.com/docs/api-reference/chat/create)

У запроса есть разные параметры:
- Количество [токенов](https://platform.openai.com/tokenizer) — единиц обрабатываемого текста. ≈ 4 символам или 0.75 слова 
- Суффикс для добавления в конец запроса
- Степень детерминированности (`temperature` или `top_p`) — чем больше, тем больше ответы на одинаковые запросы будут отличаться.
и другие.

> [!NOTE] Chat APIs по умолчанию __недетерминированные__, то есть без возможности предсказать выдаваемый ими результат.

В теле запроса обязательно указывается текущая модель (`model`) и сообщение (`prompt` или `messages`):

```js
fetch(BASE_URL, {
		method: 'POST',
		headers: {
			Authorization: `Bearer ${API_KEY}`,
			'Content-Type': 'application/json'
		},
		body: JSON.stringify({
			model: 'gpt-3.5-turbo',
			max_tokens: 7,
			temperature: 0,
			prompt: 'hello, how are you?', // или
			messages: [
				{role: 'user', content: 'hello, how are you?'}
			]
		})
})
```

## Запросы

Качественный промпт — залог того, что модель ответит наилучшим образом. Вот основной алгоритм:

1. Cоставь запрос
2. Добавь проверенные данные (напр. примеры)
3. Проверь настройки

Чтобы улучшить навык писать качественные промпты, можно пройти [курс от OpenAI](https://learn.deeplearning.ai/chatgpt-prompt-eng) или посмотреть файл [ChatGPT Prompt Engineering for Developers](ChatGPT%20Prompt%20Engineering%20for%20Developers.md Prompt Engineering for Developers>)

# Внешние ресурсы
Документация — https://platform.openai.com/docs/introduction/overview
Курс по Prompt Engineering — https://learn.deeplearning.ai/chatgpt-prompt-eng